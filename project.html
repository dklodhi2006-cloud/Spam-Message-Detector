
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpamGuard AI - Minor Project</title>
    <!-- Tailwind CSS for Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="bg-blue-600 p-1.5 rounded-lg">
                    <i data-lucide="shield-alert" class="text-white w-5 h-5"></i>
                </div>
                <div>
                    <h1 class="text-lg font-bold leading-none tracking-tight text-slate-900">SpamGuard <span class="text-blue-600">AI</span></h1>
                    <p class="text-[10px] text-slate-500 font-medium uppercase tracking-wider">ML Minor Project</p>
                </div>
            </div>
            <div class="hidden sm:flex items-center gap-4 text-xs font-medium text-slate-500">
                <span class="flex items-center gap-1"><i data-lucide="brain-circuit" class="w-3 h-3"></i> Naive Bayes Algorithm</span>
            </div>
        </div>
    </nav>

    <main class="flex-grow p-4 md:p-8">
        <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- Left Column: Interaction -->
            <div class="lg:col-span-8 space-y-6">
                <!-- Input Section -->
                <div class="glass-panel bg-white rounded-2xl shadow-sm p-6 relative overflow-hidden group">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold flex items-center gap-2">
                            <i data-lucide="message-square" class="text-slate-400 w-5 h-5"></i> 
                            Message Analyzer
                        </h2>
                        <div class="flex gap-2">
                            <button onclick="loadExample('spam')" class="text-xs bg-red-50 text-red-600 px-3 py-1.5 rounded-full hover:bg-red-100 transition-colors font-medium">Load Spam</button>
                            <button onclick="loadExample('ham')" class="text-xs bg-green-50 text-green-600 px-3 py-1.5 rounded-full hover:bg-green-100 transition-colors font-medium">Load Ham</button>
                        </div>
                    </div>

                    <textarea id="messageInput" rows="5" 
                        class="w-full p-4 rounded-xl bg-slate-50 border-2 border-slate-100 focus:border-blue-500 focus:bg-white focus:ring-0 transition-all text-lg resize-none placeholder:text-slate-300"
                        placeholder="Paste a text message or email subject here to analyze..."></textarea>
                    
                    <div class="mt-4 flex flex-wrap gap-3 items-center justify-between">
                        <button onclick="analyzeMessage()" 
                            class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl font-semibold transition-all shadow-md hover:shadow-lg flex items-center gap-2">
                            <i data-lucide="search" class="w-5 h-5"></i> Check Message
                        </button>
                        <button onclick="clearInput()" class="text-slate-400 hover:text-slate-600 px-4 py-2 text-sm font-medium transition-colors">Clear</button>
                    </div>
                </div>

                <!-- Results Section -->
                <div id="resultSection" class="hidden glass-panel bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-200 animate-fade-in">
                    <div class="p-8">
                        <div class="flex items-start gap-6 mb-8">
                            <div id="resultIconContainer" class="p-4 rounded-2xl shrink-0 transition-colors duration-500 bg-slate-100">
                                <i id="resultIcon" data-lucide="help-circle" class="w-10 h-10"></i>
                            </div>
                            <div class="flex-grow">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h2 id="resultTitle" class="text-3xl font-bold text-slate-800 tracking-tight">Result</h2>
                                        <p id="resultDesc" class="text-slate-500 mt-1">Prediction based on probabilities</p>
                                    </div>
                                    <span id="confidenceScore" class="bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">0% Confidence</span>
                                </div>
                                <div class="mt-6">
                                    <div class="w-full bg-slate-100 rounded-full h-3 overflow-hidden">
                                        <div id="probabilityBar" class="bg-slate-400 h-3 rounded-full transition-all duration-1000 ease-out" style="width: 50%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Feedback Loop -->
                        <div class="bg-slate-50 rounded-xl p-5 border border-slate-100 mb-6 flex flex-col sm:flex-row items-center justify-between gap-4">
                            <div class="flex items-center gap-3">
                                <div class="bg-white p-2 rounded-lg shadow-sm text-blue-500"><i data-lucide="graduation-cap" class="w-5 h-5"></i></div>
                                <div>
                                    <p class="text-sm font-bold text-slate-700">Incorrect?</p>
                                    <p class="text-xs text-slate-500">Teach the model to improve accuracy.</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="trainModel('spam')" class="py-2 px-4 rounded-lg border border-red-200 bg-white text-red-600 hover:bg-red-50 text-sm font-semibold transition-colors">Mark as Spam</button>
                                <button onclick="trainModel('ham')" class="py-2 px-4 rounded-lg border border-green-200 bg-white text-green-600 hover:bg-green-50 text-sm font-semibold transition-colors">Mark as Safe</button>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-3">Trigger Words</h4>
                            <div id="tokenTags" class="flex flex-wrap gap-2"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Stats -->
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-slate-900 text-white rounded-2xl shadow-xl p-6 relative overflow-hidden">
                    <h3 class="text-lg font-semibold mb-6 flex items-center gap-2 relative z-10">
                        <i data-lucide="bar-chart-2"></i> Training Data
                    </h3>
                    <div class="space-y-4 relative z-10">
                        <div class="flex justify-between p-3 bg-white/5 rounded-xl border border-white/10">
                            <span class="text-sm text-slate-300">Spam Patterns</span>
                            <span class="text-xl font-bold font-mono text-red-400" id="spamCount">0</span>
                        </div>
                        <div class="flex justify-between p-3 bg-white/5 rounded-xl border border-white/10">
                            <span class="text-sm text-slate-300">Safe Patterns</span>
                            <span class="text-xl font-bold font-mono text-green-400" id="hamCount">0</span>
                        </div>
                        <div class="mt-6 pt-6 border-t border-white/10 text-center">
                            <span class="text-3xl font-bold text-blue-400 block" id="totalWords">0</span>
                            <span class="text-xs text-slate-400 uppercase tracking-widest">Words in Vocabulary</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- LOGIC SCRIPT - This is the part that makes it work! -->
    <script>
        // Initialize Icons
        lucide.createIcons();

        /* --- 1. THE AI ENGINE (Naive Bayes) --- */
        class SpamClassifier {
            constructor() {
                this.tokenizer = (text) => {
                    return text.toLowerCase()
                        .replace(/[^\w\s]/g, '') // Remove punctuation
                        .split(/\s+/)            // Split by whitespace
                        .filter(w => w.length > 2); // Ignore short words
                };
                this.spamCounts = {};
                this.hamCounts = {};
                this.spamTotal = 0;
                this.hamTotal = 0;
                this.vocabulary = new Set();
            }

            train(text, label) {
                const tokens = this.tokenizer(text);
                tokens.forEach(token => {
                    this.vocabulary.add(token);
                    if (label === 'spam') {
                        this.spamCounts[token] = (this.spamCounts[token] || 0) + 1;
                        this.spamTotal++;
                    } else {
                        this.hamCounts[token] = (this.hamCounts[token] || 0) + 1;
                        this.hamTotal++;
                    }
                });
                updateStats();
            }

            predict(text) {
                const tokens = this.tokenizer(text);
                let spamScore = 0;
                let hamScore = 0;
                const vocabSize = this.vocabulary.size;

                tokens.forEach(token => {
                    // Laplace Smoothing
                    const spamFreq = (this.spamCounts[token] || 0) + 1;
                    const spamProb = spamFreq / (this.spamTotal + vocabSize);
                    spamScore += Math.log(spamProb);

                    const hamFreq = (this.hamCounts[token] || 0) + 1;
                    const hamProb = hamFreq / (this.hamTotal + vocabSize);
                    hamScore += Math.log(hamProb);
                });

                return {
                    isSpam: spamScore > hamScore,
                    spamScore, hamScore, tokens
                };
            }
        }

        const classifier = new SpamClassifier();

        /* --- 2. PRE-TRAINING DATA --- */
        const initialData = [
            { t: "win free iphone cash prize lottery", l: "spam" },
            { t: "urgent business proposal millions dollar", l: "spam" },
            { t: "click link below to verify account", l: "spam" },
            { t: "congratulations selected winner", l: "spam" },
            { t: "meeting at 3pm conference room", l: "ham" },
            { t: "hey mom how are you", l: "ham" },
            { t: "project deadline extended", l: "ham" },
            { t: "lunch tomorrow", l: "ham" }
        ];
        initialData.forEach(d => classifier.train(d.t, d.l));

        /* --- 3. UI FUNCTIONS --- */
        function updateStats() {
            document.getElementById('spamCount').innerText = classifier.spamTotal;
            document.getElementById('hamCount').innerText = classifier.hamTotal;
            document.getElementById('totalWords').innerText = classifier.vocabulary.size;
        }

        function analyzeMessage() {
            const text = document.getElementById('messageInput').value;
            if (!text.trim()) { alert("Please enter a message!"); return; }

            const result = classifier.predict(text);
            const ui = {
                section: document.getElementById('resultSection'),
                title: document.getElementById('resultTitle'),
                desc: document.getElementById('resultDesc'),
                icon: document.getElementById('resultIconContainer'),
                bar: document.getElementById('probabilityBar'),
                score: document.getElementById('confidenceScore'),
                tags: document.getElementById('tokenTags')
            };

            ui.section.classList.remove('hidden');

            // Calculate confidence visual
            const diff = Math.abs(result.spamScore - result.hamScore);
            const confidence = Math.min(Math.max((diff * 15) + 50, 50), 99);

            if (result.isSpam) {
                ui.title.innerText = "SPAM DETECTED";
                ui.title.className = "text-3xl font-bold text-red-600";
                ui.desc.innerText = "Contains patterns commonly found in spam.";
                ui.icon.innerHTML = '<i data-lucide="shield-alert" class="w-10 h-10 text-red-600"></i>';
                ui.icon.className = "p-4 rounded-2xl shrink-0 transition-colors duration-500 bg-red-100";
                ui.bar.className = "bg-red-500 h-3 rounded-full transition-all duration-1000";
                ui.bar.style.width = `${confidence}%`;
                ui.score.innerText = `${Math.floor(confidence)}% SPAM Confidence`;
                ui.score.className = "bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider";
            } else {
                ui.title.innerText = "LOOKS SAFE";
                ui.title.className = "text-3xl font-bold text-green-600";
                ui.desc.innerText = "This message appears legitimate.";
                ui.icon.innerHTML = '<i data-lucide="shield-check" class="w-10 h-10 text-green-600"></i>';
                ui.icon.className = "p-4 rounded-2xl shrink-0 transition-colors duration-500 bg-green-100";
                ui.bar.className = "bg-green-500 h-3 rounded-full transition-all duration-1000";
                ui.bar.style.width = `${confidence}%`;
                ui.score.innerText = `${Math.floor(confidence)}% SAFE Confidence`;
                ui.score.className = "bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider";
            }

            // Show Keywords
            ui.tags.innerHTML = '';
            result.tokens.forEach(token => {
                const s = classifier.spamCounts[token] || 0;
                const h = classifier.hamCounts[token] || 0;
                let color = "bg-slate-100 text-slate-500";
                if (s > h) color = "bg-red-100 text-red-700 border border-red-200";
                if (h > s) color = "bg-green-100 text-green-700 border border-green-200";
                
                const span = document.createElement('span');
                span.className = `px-2 py-1 rounded text-xs font-mono border ${color}`;
                span.innerText = `${token} (S:${s}/H:${h})`;
                ui.tags.appendChild(span);
            });
            lucide.createIcons();
        }

        function trainModel(label) {
            const text = document.getElementById('messageInput').value;
            if(!text) return;
            classifier.train(text, label);
            analyzeMessage(); // Refresh result
            alert(`Learned as ${label.toUpperCase()}!`);
        }

        function clearInput() {
            document.getElementById('messageInput').value = '';
            document.getElementById('resultSection').classList.add('hidden');
        }

        function loadExample(type) {
            const examples = {
                spam: "CONGRATULATIONS! You won a free iPhone. Click here to claim your prize now!",
                ham: "Hey, are we still meeting for lunch at 12? Let me know."
            };
            document.getElementById('messageInput').value = examples[type];
        }

        // Run stats update on load
        updateStats();
    </script>
</body>
</html>

